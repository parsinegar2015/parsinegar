define([],function(){$(function(){$("form[name=add_thesis]").submit(function(event){$("input:not([type=submit])").each(function(){if(!$(this).val().match(/^[\s\t\r\n]*\S+/ig)){self=$(this);name=self.attr("name");if(name!="url"&&name!="title2"){self.css("border","1px solid red");event.preventDefault();}}
self=$(this);name=self.attr("name");if(name=="date"){if(!/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(self.val())){self.css("border","1px solid red");event.preventDefault();}else{self.css("border","1px solid #ccc");}}});if(!$("textarea[name=min_ckeditor]").val().match(/^[\s\t\r\n]*\S+/ig)){event.preventDefault();}
if($("select[name=teacher]").find(":selected").text()=="Choose here"){$("select[name=teacher]").css("border","1px solid red");event.preventDefault();}});$("select[name=teacher]").change(function(){if($(this).find(":selected").text()!="Choose hare"){$(this).css("border","");}else{$(this).css("border","1px solid red");}});$("form[name=add_thesis] input[type=text]").live("blur",function(){self=$(this);name=self.attr("name");if(!self.val().match(/^[\s\t\r\n]*\S+/ig)){if(name!="url"&&name!="title2"){self.css("border","1px solid red");}}else{self.css("border","1px solid #ccc");}
if(name=="url"&&self.val().match(/^[\s\t\r\n]*\S+/ig)){if(!/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(self.val())){self.css("border","1px solid red");}}
if(name=="date"){if(!/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(self.val())){self.css("border","1px solid red");}}});$("form[name=add_thesis] input[type=text]").live("keyup change click",function(){self=$(this);if(!self.val().match(/^[\s\t\r\n]*\S+/ig)){self.css("border","1px solid #ccc");}
name=self.attr("name");if(name=="url"&&self.val().match(/^[\s\t\r\n]*\S+/ig)){if(!/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(self.val())){self.css("border","1px solid red");}}
if(name=="date"){if(!/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(self.val())){self.css("border","1px solid red");}}});$("input[name=keywords]").on({focus:function(){$(".keyword_typeahead").fadeIn("slow");},click:function(){return false;}});$(".keyword_typeahead").click(function(event){});$(document).click(function(){$(".keyword_typeahead").fadeOut("slow");});var keyword_js_var=["\u0645\u0647\u0646\u062f\u0633\u06cc \u0645\u0627\u0644\u06cc"];function findMatches(q,strs){var matches,substrRegex;matches=[];substrRegex=new RegExp("^"+q,"i");$.each(strs,function(i,str){if(substrRegex.test(str)){matches.push('<div class="k_item">'+str+'</div>');}});return matches.join("\n");};$(".k_item").live("click",function(){var $val=$("input[name=keywords]").val();var arr=$val.split("-");arr.pop();$val=arr.join("-");var xlen=arr.length;$dash="";if(xlen>0){$dash="-";}
$("input[name=keywords]").val($val+$dash+$(this).html());});$("input[name=keywords]").on("keyup",function(){var $val=$(this).val();if($val!=""&&$val.substr(-1)!="-"){var xarr=$val.split("-");var xlen=xarr.length;--xlen;$(".keyword_typeahead").html(findMatches(xarr[xlen],keyword_js_var));}});});});